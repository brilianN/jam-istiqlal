
#include <avr/pgmspace.h>

#define BULAN_INI 1
#define HARI_INI 5



	//2 Dimensi untuk [jam,menit]
	unsigned int jadualRef[5][2]={{4,17},{11,56},{15,23},{18,10},{19,26}};
	unsigned int jadualHariIniRel[5]={0,0,0,0,0};//relatif terhadap jadualRef
	unsigned int jadualHariIniAbs[5][2]={{0,0},{0,0},{0,0},{0,0},{0,0}};	//absolute

			
/**Master jadual sholat setahun
	setiap row berisi jadual sehari, relatif terhadap hari sebelumnya
	setiap waktu sholat terdiri 2 bit, 11 berarti -1
	Urutan: [S][D][A][M][I]
*/
int jadualSetahun[] PROGMEM =
{
  	0b0000000000,  //  0x0000 ;1 Januari.DB ;1  
	0b0000010101,  //  0x0015 ;2  
	0b0101000000,  //  0x0140 ;3  
	0b0100000100,  //  0x0104 ;4  
	0b0001010001,  //  0x0051 ;5  
	0b0100000000,  //  0x0100 ;6  
	0b0001000100,  //  0x0044 ;7  
	0b0100010001,  //  0x0111 ;8  
	0b0101000000,  //  0x0140 ;9  
	0b0000000100,  //  0x0004 ;10 
	0b0100000000,  //  0x0100 ;11 
	0b0001010001,  //  0x0051 ;12 
	0b0100000100,  //  0x0104 ;13 
	0b0000000000,  //  0x0000 ;14 
	0b0101000000,  //  0x0140 ;15 
	0b0100000000,  //  0x0100 ;16 
	0b0001000100,  //  0x0044 ;17 
	0b0100010000,  //  0x0110 ;18 
	0b0000000000,  //  0x0000 ;19 
	0b0100000001,  //  0x0101 ;20 
	0b0001000000,  //  0x0040 ;21 
	0b0100000100,  //  0x0104 ;22 
	0b0000000000,  //  0x0000 ;23 
	0b0101000000,  //  0x0140 ;24 
	0b0000000000,  //  0x0000 ;25 
	0b0100110000,  //  0x0130 ;26 
	0b0000000000,  //  0x0000 ;27 
	0b0100000011,  //  0x0103 ;28 
	0b0001000000,  //  0x0040 ;29 
	0b0100000000,  //  0x0100 ;30 
	0b0000000000,  //  0x0000 ;31 
	0b0100110000, //   0x0130 ;32 1 //february						
	0b0000000000, //   0x0000 ;33 2  
	0b0000000000, //   0x0000 ;34 3  
	0b0100000000, //   0x0100 ;35 4  
	0b0001110011, //   0x0073 ;36 5  
	0b0100000000, //   0x0100 ;37 6  
	0b0000000000, //   0x0000 ;38 7  
	0b0000110000, //   0x0030 ;39 8  
	0b0100000011, //   0x0103 ;40 9  
	0b0000111100, //   0x003C ;41 10 
	0b0000000000, //   0x0000 ;42 11 
	0b0000110000, //   0x0030 ;43 12 
	0b0100000011, //   0x0103 ;44 13 
	0b0000110000, //   0x0030 ;45 14 
	0b0000110000, //   0x0030 ;46 15 
	0b0000001111, //   0x000F ;47 16 
	0b0100110000, //   0x0130 ;48 17 
	0b0000110000, //   0x0030 ;49 18 
	0b0011000011, //   0x00C3 ;50 19 
	0b0000111100, //   0x003C ;51 20 
	0b0000110000, //   0x0030 ;52 21 
	0b0100000011, //   0x0103 ;53 22 
	0b0000111100, //   0x003C ;54 23 
	0b0000110011, //   0x0033 ;55 24 
	0b0000110000, //   0x0030 ;56 25 
	0b0000111100, //   0x003C ;57 26 
	0b0011110011, //   0x00F3 ;58 27 
	0b0000110000, //   0x0030 ;59 28 
	0b0000111111, //   0x003F ;60 29 
    0b0000000000, //   0x0000     30      
    0b0000000000, //   0x0000       31 
	0b0000110000, //   0x0030 ;61 1    //Maret
	0b0000110011, //   0x0033 ;62 2 
	0b0011111100, //   0x00FC ;63 3 
	0b0000110011, //   0x0033 ;64 4 
	0b0000001100, //   0x000C ;65 5 
	0b0000010000, //   0x0010 ;66 6 
	0b0011000011, //   0x00C3 ;67 7 
	0b0000011100, //   0x001C ;68 8 
	0b0000000011, //   0x0003 ;69 9 
	0b0000001100, //   0x000C ;70 10
	0b0011010011, //   0x00D3 ;71 11
	0b0000000000, //   0x0000 ;72 12
	0b0000001111, //   0x000F ;73 13
	0b0000010000, //   0x0010 ;74 14
	0b0011001111, //   0x00CF ;75 15
	0b0000000000, //   0x0000 ;76 16
	0b0000011111, //   0x001F ;77 17
	0b0000000000, //   0x0000 ;78 18
	0b0011001111, //   0x00CF ;79 19
	0b1100000000, //   0x0300 ;80 20
	0b0000001111, //   0x000F ;81 21
	0b0011000000, //   0x00C0 ;82 22
	0b0000011111, //   0x001F ;83 23
	0b0000000000, //   0x0000 ;84 24
	0b0011001100, //   0x00CC ;85 25
	0b0000000011, //   0x0003 ;86 26
	0b1100000000, //   0x0300 ;87 27
	0b0000001111, //   0x000F ;88 28
	0b0011000000, //   0x00C0 ;89 29
	0b0000001111, //   0x000F ;90 30
	0b0000000000, //   0x0000 ;91 31
	0b0011001111, //   0x00CF;92  1 	//April
	0b0000010000, //   0x0010;93  2 
	0b1100001100, //   0x030C;94  3 
	0b0011000011, //   0x00C3;95  4 
	0b0000001100, //   0x000C;96  5 
	0b0000000011, //   0x0003;97  6 
	0b0000000000, //   0x0000;98  7 
	0b1111001100, //   0x03CC;99  8 
	0b0000000011, //   0x0003;100 9 
	0b0000001100, //   0x000C;101 10
	0b0011000000, //   0x00C0;102 11
	0b0000111111, //   0x003F;103 12
	0b0000000000, //   0x0000;104 13
	0b1100000000, //   0x0300;105 14
	0b0011001111, //   0x00CF;106 15
	0b0000000000, //   0x0000;107 16
	0b0000001100, //   0x000C;108 17
	0b0000000011, //   0x0003;109 18
	0b0000000000, //   0x0000;110 19
	0b1111001100, //   0x03CC;111 20
	0b0000000000, //   0x0000;112 21
	0b0000000011, //   0x0003;113 22
	0b0000001100, //   0x000C;114 23
	0b0000000000, //   0x0000;115 24
	0b0011000000, //   0x00C0;116 25
	0b0000001111, //   0x000F;117 26
	0b0000000000, //   0x0000;118 27
	0b1100000000, //   0x0300;119 28
	0b0000000000, //   0x0000;120 29
	0b0000001100, //   0x000C;121 30   
    0b0000000000, //   0x0000     31   
	0b0000000000, //   0x0000 ;122  1 	MEI   
	0b0011000011, //   0x00C3 ;123  2 
	0b0000000000, //   0x0000 ;124  3 
	0b0000001100, //   0x000C ;125  4 
	0b0000000000, //   0x0000 ;126  5 
	0b0000000000, //   0x0000 ;127  6 
	0b0000000000, //   0x0000 ;128  7 
	0b0000000000, //   0x0000 ;129  8 
	0b0000000000, //   0x0000 ;130  9 
	0b0000001100, //   0x000C ;131  10
	0b0000000000, //   0x0000 ;132  11
	0b0000000000, //   0x0000 ;133  12
	0b0000000000, //   0x0000 ;134  13
	0b0000000000, //   0x0000 ;135  14
	0b0000000000, //   0x0000 ;136  15
	0b0000000000, //   0x0000 ;137  16
	0b0000000000, //   0x0000 ;138  17
	0b0000000000, //   0x0000 ;139  18
	0b0000000000, //   0x0000 ;140  19
	0b0000000000, //   0x0000 ;141  20
	0b0000000000, //   0x0000 ;142  21
	0b0000000000, //   0x0000 ;143  22
	0b0000000000, //   0x0000 ;144  23
	0b0000000000, //   0x0000 ;145  24
	0b0000010000, //   0x0010 ;146  25
	0b0001000001, //   0x0041 ;147  26
	0b0000000000, //   0x0000 ;148  27
	0b0000000000, //   0x0000 ;149  28
	0b0100000000, //   0x0100 ;150  29
	0b0000000000, //   0x0000 ;151  30
	0b0000000000, //   0x0000 ;152  31
	0b0000000000, //   0x0000 ;153  1 	//Juni
	0b0001010001, //   0x0051 ;154  2 
	0b0000000000, //   0x0000 ;155  3 
	0b0000000000, //   0x0000 ;156  4 
	0b0100000100, //   0x0104 ;157  5 
	0b0000000000, //   0x0000 ;158  6 
	0b0000000000, //   0x0000 ;159  7 
	0b0001010001, //   0x0051 ;160  8 
	0b0000000000, //   0x0000 ;161  9 
	0b0000000000, //   0x0000 ;162  10
	0b0100000000, //   0x0100 ;163  11
	0b0000000101, //   0x0005 ;164  12
	0b0001010000, //   0x0050 ;165  13
	0b0000000000, //   0x0000 ;166  14
	0b0000000000, //   0x0000 ;167  15
	0b0100000000, //   0x0100 ;168  16
	0b0000010101, //   0x0015 ;169  17
	0b0001000000, //   0x0040 ;170  18
	0b0000000000, //   0x0000 ;171  19
	0b0100000000, //   0x0100 ;172  20
	0b0000000000, //   0x0000 ;173  21
	0b0001010101, //   0x0055 ;174  22
	0b0000000000, //   0x0000 ;175  23
	0b0000000000, //   0x0000 ;176  24
	0b0100000000, //   0x0100 ;177  25
	0b0000010101, //   0x0015 ;178  26
	0b0001000000, //   0x0040 ;179  27
	0b0000000000, //   0x0000 ;180  28
	0b0000000000, //   0x0000 ;181  29
	0b0100000100, //   0x0104 ;182  30
    0b0000000000, //   0x0000       31
	0b0000010000, //   0x0010 ;183  1       //Juli
	0b0001000001, //   0x0041 ;184  2 
	0b0000000000, //   0x0000 ;185  3 
	0b0000000000, //   0x0000 ;186  4 
	0b0100000100, //   0x0104 ;187  5 
	0b0000010000, //   0x0010 ;188  6 
	0b0000000000, //   0x0000 ;189  7 
	0b0001000001, //   0x0041 ;190  8 
	0b0000000000, //   0x0000 ;191  9 
	0b0000000100, //   0x0004 ;192  10
	0b0100000000, //   0x0100 ;193  11
	0b0000010000, //   0x0010 ;194  12
	0b0000000000, //   0x0000 ;195  13
	0b0000000000, //   0x0000 ;196  14
	0b0000000100, //   0x0004 ;197  15
	0b0001000000, //   0x0040 ;198  16
	0b0000000001, //   0x0001 ;199  17
	0b0000000000, //   0x0000 ;200  18
	0b0000000000, //   0x0000 ;201  19
	0b0000000000, //   0x0000 ;202  20
	0b0100000000, //   0x0100 ;203  21
	0b0000000100, //   0x0004 ;204  22
	0b0000000000, //   0x0000 ;205  23
	0b0000000000, //   0x0000 ;206  24
	0b0000000000, //   0x0000 ;207  25
	0b0000000000, //   0x0000 ;208  26
	0b0000000000, //   0x0000 ;209  27
	0b0000000000, //   0x0000 ;210  28
	0b0000000000, //   0x0000 ;211  29
	0b0000000000, //   0x0000 ;212  30
	0b1100000000, //   0x0300 ;213  31
	0b0000000000, //   0x0000 ;214  1       //Agustus
	0b0000000000, //   0x0000 ;215  2 
	0b0000000011, //   0x0003 ;216  3 
	0b0011000000, //   0x00C0 ;217  4 
	0b0000000000, //   0x0000 ;218  5 
	0b0000110000, //   0x0030 ;219  6 
	0b0000000000, //   0x0000 ;220  7 
	0b0000000000, //   0x0000 ;221  8 
	0b1100000000, //   0x0300 ;222  9 
	0b0000000000, //   0x0000 ;223  10
	0b0000110000, //   0x0030 ;224  11
	0b0011000011, //   0x00C3 ;225  12
	0b0000000000, //   0x0000 ;226  13
	0b1100110000, //   0x0330 ;227  14
	0b0000000000, //   0x0000 ;228  15
	0b0000000000, //   0x0000 ;229  16
	0b0011110000, //   0x00F0 ;230  17
	0b1100000011, //   0x0303 ;231  18
	0b0000000000, //   0x0000 ;232  19
	0b0000110000, //   0x0030 ;233  20
	0b0011000000, //   0x00C0 ;234  21
	0b1100000000, //   0x0300 ;235  22
	0b0000111100, //   0x003C ;236  23
	0b0000000011, //   0x0003 ;237  24
	0b1111110000, //   0x03F0 ;238  25
	0b0000000000, //   0x0000 ;239  26
	0b0000110000, //   0x0030 ;240  27
	0b1100000000, //   0x0300 ;241  28
	0b0011110011, //   0x00F3 ;242  29
	0b1100001100, //   0x030C ;243  30
	0b0000110000, //   0x0030 ;244  31
	0b0011000000, //   0x00C0 ;245  1 	//September
	0b1100110011, //   0x0333 ;246  2 
	0b0000110000, //   0x0030 ;247  3 
	0b1111000000, //   0x03C0 ;248  4 
	0b0000111100, //   0x003C ;249  5 
	0b1100110000, //   0x0330 ;250  6 
	0b0011000011, //   0x00C3 ;251  7 
	0b0000110000, //   0x0030 ;252  8 
	0b1100110000, //   0x0330 ;253  9 
	0b0011001100, //   0x00CC ;254  10
	0b1100110011, //   0x0333 ;255  11
	0b0000110000, //   0x0030 ;256  12
	0b1111000000, //   0x03C0 ;257  13
	0b0000110000, //   0x0030 ;258  14
	0b1100110000, //   0x0330 ;259  15
	0b0011111111, //   0x00FF ;260  16
	0b1100000000, //   0x0300 ;261  17
	0b0011110000, //   0x00F0 ;262  18
	0b1100110000, //   0x0330 ;263  19
	0b0000110000, //   0x0030 ;264  20
	0b1111111111, //   0x03FF ;265  21
	0b1100000000, //   0x0300 ;266  22
	0b0000110000, //   0x0030 ;267  23
	0b1111110000, //   0x03F0 ;268  24
	0b0000110000, //   0x0030 ;269  25
	0b1100110000, //   0x0330 ;270  26
	0b0011111100, //   0x00FC ;271  27
	0b1100110011, //   0x0333 ;272  28
	0b0000110000, //   0x0030 ;273  29
	0b1111110000, //   0x03F0 ;274  30
    0b0000000000, //   0x0000       31
	0b0000000000, //   0x0000 ;275  1   //Oktober
	0b1100110000, //   0x0330 ;276  2 
	0b0011111100, //   0x00FC ;277  3 
	0b1100110000, //   0x0330 ;278  4 
	0b0000110000, //   0x0030 ;279  5 
	0b1100110000, //   0x0330 ;280  6 
	0b0011110000, //   0x00F0 ;281  7 
	0b1100110000, //   0x0330 ;282  8 
	0b0000000000, //   0x0000 ;283  9 
	0b1111010000, //   0x03D0 ;284  10
	0b1100010011, //   0x0313 ;285  11
	0b0000000000, //   0x0000 ;286  12
	0b0000011101, //   0x001D ;287  13
	0b1111000000, //   0x03C0 ;288  14
	0b0000010000, //   0x0010 ;289  15
	0b1100000000, //   0x0300 ;290  16
	0b0000010000, //   0x0010 ;291  17
	0b1100000000, //   0x0300 ;292  18
	0b0011010000, //   0x00D0 ;293  19
	0b1100000000, //   0x0300 ;294  20
	0b0000000000, //   0x0000 ;295  21
	0b1100010000, //   0x0310 ;296  22
	0b0000000000, //   0x0000 ;297  23
	0b0000010000, //   0x0010 ;298  24
	0b1100000001, //   0x0301 ;299  25
	0b0011010000, //   0x00D0 ;300  26
	0b1100000100, //   0x0304 ;301  27
	0b0000010000, //   0x0010 ;302  28
	0b0000000000, //   0x0000 ;303  29
	0b1100010001, //   0x0311 ;304  30
	0b0000000000, //   0x0000 ;305  31
	0b0000010000, //   0x0010 ;306  1   //November
	0b0000000000, //   0x0000 ;307  2 
	0b1100010001, //   0x0311 ;308  3 
	0b0000000100, //   0x0004 ;309  4 
	0b0000000000, //   0x0000 ;310  5 
	0b1100010001, //   0x0311 ;311  6 
	0b0000000000, //   0x0000 ;312  7 
	0b0000010000, //   0x0010 ;313  8 
	0b0000000101, //   0x0005 ;314  9 
	0b0001010000, //   0x0050 ;315  10
	0b0000000000, //   0x0000 ;316  11
	0b1100010001, //   0x0311 ;317  12
	0b0000000100, //   0x0004 ;318  13
	0b0000010001, //   0x0011 ;319  14
	0b0000000000, //   0x0000 ;320  15
	0b0000010100, //   0x0014 ;321  16
	0b0001000001, //   0x0041 ;322  17
	0b0000010000, //   0x0010 ;323  18
	0b0000000101, //   0x0005 ;324  19
	0b0000010000, //   0x0010 ;325  20
	0b0001000001, //   0x0041 ;326  21
	0b0000010100, //   0x0014 ;327  22
	0b0000000001, //   0x0001 ;328  23
	0b0000010100, //   0x0014 ;329  24
	0b0001000001, //   0x0041 ;330  25
	0b0000010000, //   0x0010 ;331  26
	0b0000010101, //   0x0015 ;332  27
	0b0001000000, //   0x0040 ;333  28
	0b0100010101, //   0x0115 ;334  29
	0b0000000001, //   0x0001 ;335  30
    0b0000000000, //   0x0000       31
	0b0001010100, //   0x0054 ;336  1    //desember
	0b0000000001, //   0x0001 ;337  2 
	0b0001010100, //   0x0054 ;338  3 
	0b0100000001, //   0x0101 ;339  4 
	0b0000010100, //   0x0014 ;340  5 
	0b0001000001, //   0x0041 ;341  6 
	0b0100010100, //   0x0114 ;342  7 
	0b0001010001, //   0x0051 ;343  8 
	0b0000000101, //   0x0005 ;344  9 
	0b0001010000, //   0x0050 ;345  10
	0b0100000101, //   0x0105 ;346  11
	0b0000010000, //   0x0010 ;347  12
	0b0101000101, //   0x0145 ;348  13
	0b0000010000, //   0x0010 ;349  14
	0b0001000101, //   0x0045 ;350  15
	0b0100010000, //   0x0110 ;351  16
	0b0001000101, //   0x0045 ;352  17
	0b0100010000, //   0x0110 ;353  18
	0b0001000101, //   0x0045 ;354  19
	0b0100010000, //   0x0110 ;355  20
	0b0001010101, //   0x0055 ;356  21
	0b0100000000, //   0x0100 ;357  22
	0b0001000101, //   0x0045 ;358  23
	0b0100010000, //   0x0110 ;359  24
	0b0001000101, //   0x0045 ;360  25
	0b0100010000, //   0x0110 ;361  26
	0b0001000001, //   0x0041 ;362  27
	0b0100010100, //   0x0114 ;363  28
	0b0101000001, //   0x0141 ;364  29
	0b0000010100, //   0x0014 ;365  30
	0b0101000000 //    0x0140;366  31                 
                             

                           };

/** Menghitung jadual hari ini */
void init()
{
	int bulanSekarang;
	bulanSekarang=BULAN_INI;
	bulanSekarang--;
	unsigned int hariIni=bulanSekarang*31 + HARI_INI;//hariIni=urutan hari sejak 1 Januari
	int waktuKe=4;
	for(unsigned int index=1;index<hariIni;index++) //jika ditulis index<=hariIni: logical error
	{
		unsigned int data=pgm_read_word(&(jadualSetahun[index]));
		unsigned int data2=data && 0b11;//get rightmost 2 bit
		if(data2==0b11)
			jadualHariIniRel[waktuKe]--;
		else
		if(data2==1)
			jadualHariIniRel[waktuKe]++;
	}; 
	
	jadualHariIniAbs[waktuKe][0]=jadualRef[waktuKe][0]+jadualHariIniRel[waktuKe];
	jadualHariIniAbs[waktuKe][1]=jadualRef[waktuKe][1]+jadualHariIniRel[waktuKe];


};

 
int main(void)
{
	init();
};
